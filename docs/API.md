# API Documentation

*This document is a living reference for the Betting Markets Aggregator API. It contains the endpoints that are currently implemented, their request/response structures, and example payloads. As new features are added, simply append new sections or expand the existing placeholders.*

---

## Base URL
```
http://localhost:5000/api/v1
```
All endpoints are prefixed with `/api/v1`.

---

## Endpoints

### `GET /games`
**Description**: Retrieve a list of all stored games/odds from the SQLite database.

**Response** (JSON array of objects):
```json
[
  {
    "sport": "NFL",
    "game_id": "12345",
    "home_team": "Patriots",
    "away_team": "Bills",
    "start_time": "2025-12-10T18:30:00"
  },
  ...
]
```
*Fields are defined by the `StandardizedGame` Pydantic model (see `src/core/schemas.py`).*

**Notes**:
- The endpoint does **not** accept query parameters yet â€“ it returns the full table.
- Future versions may support pagination, filtering by sport, or date ranges.

---

### `GET /arbitrage`
**Description**: Placeholder for an arbitrageâ€‘detection endpoint. Currently returns a static message.

**Response** (JSON object):
```json
{ "message": "Arbitrage endpoint not yet implemented" }
```

**TODO**:
- Implement logic that compares odds across providers and returns potential arbitrage opportunities.

---

### `GET /status`
**Description**: Returns a concise health summary generated by the (stub) LLM monitor.

**Response** (plainâ€‘text markdown):
```
ðŸ§©â€¯[LLMâ€‘STUB]â€¯I received the prompt but am not connected to a real model yet.
Prompt length: 1234 characters.
```

**Notes**:
- The response is currently a placeholder; once a real LLM is integrated, the report will include recent log excerpts, DB row counts, and any detected anomalies.
- The endpoint returns `Content-Type: text/plain; charset=utf-8` so it can be rendered directly in markdown viewers.

---

## Error Handling
- All endpoints return standard HTTP status codes (`200` on success, `4xx`/`5xx` on error).
- Errors are logged via the central logger (`src/core/logger.py`).
- Future work will include a unified errorâ€‘response schema (e.g., `{ "error": "description" }`).

---

## Extending the API
When new endpoints are added, follow this template:
1. Add a **section header** with the HTTP method and path.
2. Provide a short **description** of the endpointâ€™s purpose.
3. Document **request parameters** (query, path, body) if any.
4. Show a **sample request** (cURL) and **sample response** (JSON or other).
5. List **status codes** that can be returned.
6. Add any **TODO** notes for future implementation details.

---

*Generated on 2025â€‘12â€‘05.*
